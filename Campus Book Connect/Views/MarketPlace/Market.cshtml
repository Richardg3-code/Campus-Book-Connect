@model IEnumerable<Campus_Book_Connect.Models.BookTable.Book>

@{
    ViewData["Title"] = "Marketplace";
}

<h2 class="mb-4">📚 Marketplace</h2>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

@if (!Model.Any())
{
    <div class="text-center text-muted">
        <i class="fas fa-box-open fa-2x mb-2" style="color: var(--primary);"></i>
        <p>No books available right now.</p>
    </div>
}
else
{
    <div class="row row-cols-1 row-cols-md-3 g-4">
        @foreach (var book in Model)
        {
            <div class="col">
                <div class="card h-100 shadow-sm">
                    @* Optional image section (if your Book model supports an ImageUrl) *@
                    @* <img src="@book.ImageUrl" class="card-img-top" alt="@book.Title" /> *@

                    <div class="card-body">
                        <h5 class="card-title">@book.Title</h5>
                        <p class="card-text"><strong>Author:</strong> @book.Author</p>
                        <p class="card-text"><strong>Price:</strong> $@book.Price</p>

                        <button class="btn btn-primary buy-btn"
                                data-id="@book.Id"
                                data-title="@book.Title"
                                data-price="@book.Price">
                            <i class="fas fa-cart-plus me-1"></i> Buy
                        </button>
                    </div>
                </div>
            </div>
        }
    </div>
}

<hr class="my-5" />

<h3 class="mb-3">🛒 Your Cart</h3>

<ul id="cartItems" class="list-group mb-3 shadow-sm rounded">
    <li class="list-group-item text-muted">No items in cart yet.</li>
</ul>

<p id="totalPrice" class="fw-bold fs-5"><strong>Total:</strong> $0.00</p>

<button id="checkoutBtn" class="btn btn-primary mb-4">
    <i class="fas fa-credit-card me-1"></i> Checkout
</button>

<p id="successMessage" class="text-success fw-bold" style="display: none;">
    Thanks for your purchase!
</p>

@section Scripts {
    <script src="~/js/marketplace.js"></script>
}
